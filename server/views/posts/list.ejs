<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3 class="card-title">Posts</h3>
    <a href="/admin/posts/new" class="btn btn-primary btn-sm">+ New Post</a>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Thumb</th>
            <th><a href="?sort=title&dir=<%= sort==='title' && dir==='asc' ? 'desc' : 'asc' %>">Title</a></th>
            <th>Categories</th>
            <th>Tags</th>
            <th>Author</th>
            <th><a href="?sort=published&dir=<%= sort==='published' && dir==='asc' ? 'desc' : 'asc' %>">Published</a></th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% rows.forEach(r => { %>
            <tr>
              <td><% if (r.featured_url) { %><img src="<%= r.featured_url %>" style="width:50px;height:50px;object-fit:cover;"><% } %></td>
              <td><a href="/admin/posts/<%= r.id %>/edit"><%= r.title || '(no title)' %></a></td>
              <td><%= r.categories || '' %></td>
              <td><%= r.tags || '' %></td>
              <td><%= r.author || '' %></td>
              <td><%= r.display_date || '' %></td>
              <td><span class="badge badge-<%= r.status==='published'?'success':(r.status==='pending'?'warning':'secondary') %>"><%= r.status %></span></td>
              <td>
                <a class="btn btn-sm btn-outline-primary" href="/admin/posts/<%= r.id %>/edit">Edit</a>
                <form class="d-inline" method="post" action="/admin/posts/<%= r.id %>/trash" onsubmit="return confirm('Move to trash?');">
					<input type="hidden" name="_csrf" value="<%= csrfToken %>">
                  <button class="btn btn-sm btn-outline-danger">Trash</button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>
