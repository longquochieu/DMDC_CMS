<ul class="list-unstyled">
  <% (nodes||[]).forEach(function(node){ %>
    <li class="mb-2" data-id="<%= node.id %>">
      <div class="d-flex align-items-center">
        <i class="fas fa-grip-vertical me-2 text-muted" title="Kéo để sắp xếp"></i>
        <a class="me-2" href="/admin/pages/<%= node.id %>/edit"><%= node.title || ('#'+node.id) %></a>
        <span class="badge bg-light text-dark me-2"><%= node.slug %></span>

        <form action="/admin/pages/<%= node.id %>/trash" method="post" class="ms-auto d-inline">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <button class="btn btn-sm btn-danger" onclick="return confirm('Chuyển page vào Thùng rác?')">
            <i class="fas fa-trash"></i>
          </button>
        </form>
      </div>

      <% if (node.children && node.children.length) { %>
        <%- include('tree', { nodes: node.children, csrfToken }) %>
      <% } %>
    </li>
  <% }) %>
</ul>
