<!-- server/views/pages/tree.ejs -->
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3 class="card-title m-0">Cây Pages (kéo-thả để sắp xếp / đổi cha)</h3>
    <div class="d-flex gap-2">
      <a href="/admin/pages" class="btn btn-outline-secondary btn-sm">Dạng bảng</a>
      <a href="/admin/pages/new" class="btn btn-primary btn-sm">+ Thêm Page</a>
    </div>
  </div>

  <div class="card-body" data-tree="pages" data-lang="<%= lang %>">
    <div id="pages-tree-root">
      <ul class="list-group list-group-flush">
        <%- include('../partials/tree', {
              nodes: tree,
              basePath: 'pages',
              csrfToken: (typeof csrfToken !== 'undefined' ? csrfToken : '')
        }) %>
      </ul>
    </div>

    <p class="text-muted mt-3">
      Mẹo: kéo vào <em>biểu tượng ⠿</em> để đổi <strong>cha</strong> (thả lên tiêu đề),
      hoặc kéo vào <strong>khoảng giữa</strong> 2 mục để đổi <strong>thứ tự</strong> cùng cấp.
    </p>
  </div>
</div>
